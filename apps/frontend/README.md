# TechMind - File Manager Frontend

Современный менеджер файлов для организаций, построенный на Next.js и HeroUI.

## Технологии

- **Next.js 14** (App Router)
- **HeroUI (NextUI)** - UI компоненты
- **TypeScript**
- **Axios** - для HTTP запросов
- **Tailwind CSS**

## Структура приложения

### Страницы

1. **Вход (/login)** - Авторизация пользователя
2. **Регистрация (/register)** - Создание нового аккаунта
3. **Файлы (/files)** - Основной интерфейс для работы с файлами (Obsidian-стиль)
4. **Поиск (/search)** - Поиск файлов с фильтрами
5. **Настройки (/settings)** - Управление тегами и пользователями компании

### Основные компоненты

- `Sidebar` - Левая панель навигации
- `FolderTree` - Дерево папок и файлов
- `FilePreview` - Предпросмотр выбранного файла
- `FileInfo` - Информация о файле и управление тегами
- `SearchPanel` - Панель поиска с фильтрами
- `TagsManagement` - Управление тегами компании
- `UsersManagement` - Управление пользователями компании

## Установка и запуск

### Установка зависимостей

```bash
pnpm install
```

### Настройка окружения

Создайте файл `.env.local` на основе `.env.example`:

```bash
NEXT_PUBLIC_API_URL=http://localhost:8080
```

### Запуск в режиме разработки

```bash
pnpm dev
```

Приложение будет доступно по адресу http://localhost:3000

### Сборка для продакшена

```bash
pnpm build
pnpm start
```

## API Endpoints

Приложение ожидает следующие эндпоинты на бэкенде:

### Аутентификация
- `POST /api/auth/login` - Вход
- `POST /api/auth/register` - Регистрация

### Компании
- `GET /api/companies/my` - Получить компании пользователя
- `GET /api/companies/:id/users` - Пользователи компании
- `PUT /api/companies/:id/users/:userId/role` - Изменить роль
- `DELETE /api/companies/:id/users/:userId` - Удалить пользователя
- `POST /api/companies/:id/invite` - Пригласить пользователя

### Папки
- `GET /api/folders/tree/:companyId` - Дерево папок и документов
- `POST /api/folders` - Создать папку
- `PUT /api/folders/:id` - Обновить папку
- `DELETE /api/folders/:id` - Удалить папку

### Документы
- `POST /api/documents/search` - Поиск документов
- `GET /api/documents/:id` - Получить документ
- `POST /api/documents/upload` - Загрузить документ
- `PUT /api/documents/:id` - Обновить документ
- `DELETE /api/documents/:id` - Удалить документ

### Теги
- `GET /api/tags/:companyId` - Получить все теги
- `POST /api/tags` - Создать тег
- `PUT /api/tags/:id` - Обновить тег
- `DELETE /api/tags/:id` - Удалить тег
- `POST /api/document-tags/add` - Добавить тег к документу
- `POST /api/document-tags/remove` - Удалить тег у документа

### Отправители
- `GET /api/senders/:companyId` - Получить всех отправителей
- `POST /api/senders` - Создать отправителя

## Особенности UI

### Obsidian-подобный интерфейс

Интерфейс файлов состоит из 4 панелей:

1. **Команды** (64px слева) - Иконки навигации
2. **Дерево файлов** (изменяемая ширина) - Папки и документы
3. **Предпросмотр** (изменяемая ширина) - Просмотр выбранного файла
4. **Информация** (320px справа) - Метаданные и теги

Пользователь может изменять ширину панелей, перетаскивая разделители.

### Тёмная тема

Приложение по умолчанию использует тёмную тему. Можно переключить на светлую через ThemeSwitch компонент.

## Роли пользователей

- **0** - Просмотр (только чтение)
- **1** - Редактор (может добавлять и редактировать)
- **2** - Администратор (полный доступ)

## Что реализовано

✅ Авторизация и регистрация
✅ Просмотр дерева файлов и папок
✅ Предпросмотр документов (изображения, PDF)
✅ Поиск с фильтрами (теги, отправители)
✅ Управление тегами
✅ Управление пользователями компании
✅ Управление ролями пользователей
✅ Адаптивный Obsidian-стиль интерфейс
✅ Изменяемая ширина панелей

## Что требуется от бэкенда

Если какие-то методы не реализованы, нужно добавить:

1. **GET /api/folders/tree/:companyId** - должен возвращать:
   ```json
   {
     "folders": [...],
     "documents": [...]
   }
   ```

2. **GET /api/companies/my** - список компаний пользователя
3. **GET /api/companies/:id/users** - пользователи с данными user (join)
4. Все методы должны поддерживать Bearer токен аутентификации

## Разработка

Структура папок:
```
app/
  ├── files/        # Страница просмотра файлов
  ├── search/       # Страница поиска
  ├── settings/     # Настройки компании
  ├── login/        # Вход
  └── register/     # Регистрация

components/
  ├── files/        # Компоненты для работы с файлами
  ├── search/       # Компоненты поиска
  └── settings/     # Компоненты настроек

lib/api/
  ├── config.ts     # Конфигурация axios
  ├── types.ts      # TypeScript типы
  ├── auth.ts       # API аутентификации
  ├── documents.ts  # API документов
  ├── folders.ts    # API папок
  ├── tags.ts       # API тегов
  ├── company.ts    # API компаний
  └── senders.ts    # API отправителей

contexts/
  └── AuthContext.tsx  # Контекст аутентификации
```

## Лицензия

MIT
m s